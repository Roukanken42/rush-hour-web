{% extends 'base.html' %}

{% block content %}

{% load static %}
{% load puzzle_filters %}

<script language="javascript" src="{% static "puzzle/paper-full.js" %}" type="text/javascript"></script>

<div class="card">
	<div class="card-header">
		<div class="row">
			<h3 class="col"> {{ level.name }} </h3>
			<div class="col">
				<a class="btn btn-outline-danger float-right" href="{% url 'level_list' %}">&laquo; Back</a>
			</div>
		</div>
	</div>
	<div class="card-body">
		{% if not user.is_authenticated %}
			<div class="alert alert-danger"> You must be logged in to play!</div>
		{% endif %}

		<div class="row justify-content-center">
			<canvas id="canvas" width="{{ level.width }}px" height="{{ level.height }}px" style="margin: auto"></canvas>
		</div>
	</div>
</div>


<script type="text/javascript">
    let levelData = {{ level.data | safe }};
    levelData.levelId = {{ level.id }}
    let csfr = "{{ csrf_token }}";
    let loggedIn = "{{ user.is_authenticated }}" == "True";
</script>
<script type='text/javascript' src="{% static "puzzle/game.js" %}" canvas="canvas"></script>
{% endblock %}